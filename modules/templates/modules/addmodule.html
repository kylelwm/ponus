<!DOCTYPE html>
{% extends "index.html" %}
{% load staticfiles %}

{% block head %}
<style>

#leftsidepage{
  padding-right: 0px;
  border-style: solid;
  border-width: 1px;
}

#selectingform {
    position: fixed;
    top: 125px;
    left: 20px;
}
#palette {
  position: fixed;
  top: 250px;
}

#semesters {
  position: fixed;
  top: 150px;
  left: 400px;
  padding-bottom: 625px;
  border-style: solid;
  border-width: 1px; 
}

.list {
    background-color: lightblue;

}
 
.items .ui-selected {
    background: red;
    color: white;
    font-weight: bold;
}
 
.items {
    list-style-type: none;
    margin-left: 0px;
    width: 250px;
    float: left;
    border-style: solid;
    border-width: 1px;
}
 
.items li {
    width: 200px;
    margin: 2px;
    padding: 2px;
    cursor: pointer;
    border-radius: 3px;
}
 
.g {
    background-color: lightgreen;
}
 
.o {
    background-color: orange;
}
 
.highlight {
    border: 2px solid red;
    font-weight: bold;
}

</style>
{% endblock %}

{% block title %}

<div id= "leftsidepage">
  <div id= "selectingform">
    <h2>Select a module</h2>
    <form action="addmodule/" method="post">
       {% csrf_token %}
      {{ form }}
       <input type="submit" value="Add" />
    </form>
  </div>

  <div id="palette">
  {% if usermodules %}
   <ul id = "usermodules" class="items">
      Palette
   {% for module in usermodules %}
     <li id = "modules_{{ forloop.counter }}"class="list">    
        <h1>{{ module.module.module_code }}</h1>
      </li>
   {% endfor %}
   </ul>
  {% endif %}
  </div>
</div>
{% endblock %}

{% block content %}

<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script type="text/javascript" src="http://www.pureexample.com/js/lib/jquery.ui.touch-punch.min.js"></script>

<script>
$(function () {
        $("#usermodules,#sem1,#sem2,#sem3,#sem4,#sem5,#sem6").sortable({
                connectWith: "#usermodules,#sem1,#sem2,#sem3,#sem4,#sem5,#sem6",
                start: function (event, ui) {
                        ui.item.toggleClass("highlight");
                },
                stop: function (event, ui) {
                        ui.item.toggleClass("highlight");
                        
                        var data = $(this).sortable('serialize');
                  // POST to server using $.post or $.ajax
                    $.ajax({
                     data: data,
                      type: 'GET',
                     url: '/modules/update'
                   });
                }

        });
        $("#usermodules,#sem1,#sem2,#sem3,#sem4,#sem5,#sem6").disableSelection();
});
</script>


<div id = 'semesters'>

   <ul id = "sem1" class="items">
   Semester 1
  {% for link in semesterusermodulelink %}
    {% if link.semester.semester_name == 'Semester 1' %}
      <li id='sem1_{{ forloop.counter }}' class="list">
        <h1>{{ link.usermodule.module.module_code }}</h1>
      </li>
    {% endif %}
  {% endfor %}
  </ul>

  <ul id = "sem2" class="items">
   Semester 2
  {% for link in semesterusermodulelink %}
    {% if link.semester.semester_name == 'Semester 2' %}
      <li id = "sem2_{{ forloop.counter }}" class="list">
        <h1>{{ link.usermodule.module.module_code }}</h1>
      </li>
    {% endif %}
  {% endfor %}
  </ul>

  <ul id = "sem3" class="items">
   Semester 3
  {% for link in semesterusermodulelink %}
    {% if link.semester.semester_name == 'Semester 3' %}
      <li id = "sem3_{{ forloop.counter }}" class="list">
        <h1>{{ link.usermodule.module.module_code }}</h1>
      </li>
    {% endif %}
  {% endfor %}
  </ul>

  <ul id = "sem4" class="items">
   Semester 4
  {% for link in semesterusermodulelink %}
    {% if link.semester.semester_name == 'Semester 4' %}
      <li id = "sem4_{{ forloop.counter }}" class="list">
        <h1>{{ link.usermodule.module.module_code }}</h1>
      </li>
    {% endif %}
  {% endfor %}
  </ul>

  <ul id = "sem5" class="items">
   Semester 5
  {% for link in semesterusermodulelink %}
    {% if link.semester.semester_name == 'Semester 5' %}
      <li id = "sem5_{{ forloop.counter }}" class="list">
        <h1>{{ link.usermodule.module.module_code }}</h1>
      </li>
    {% endif %}
  {% endfor %}
  </ul>

  <ul id = "sem6" class="items">
   Semester 6
  {% for link in semesterusermodulelink %}
    {% if link.semester.semester_name == 'Semester 6' %}
      <li id = "sem6_{{ forloop.counter }}" class="list">
        <h1>{{ link.usermodule.module.module_code }}</h1>
      </li>
    {% endif %}
  {% endfor %}
  </ul>

</div>
{% endblock %}
